class Machine{constructor(){var t,e=this;this.ip=new IpAddress,$("#search").search({placeholder:"Search for a machine",onFilterChanged:function(e){var a=[];e.length>0&&$.each(e,(function(t,e){a.push(e.filter+e.operator+e.value)})),t.search(a.join(";")).draw()}}),$("#btn-new-machine").on("click",(function(e){e.preventDefault(),$("#modal-machine").modal("show"),$("#modal-machine .modal-footer .btn-primary").off("click").on("click",(function(e){e.preventDefault();var a=$(this),i=$("#modal-machine form").serialize();a.data("html",a.html()).css({width:a.outerWidth(),height:a.outerHeight()}).prop("disabled",!0).html('<div class="loader-inner ball-beat"><div></div><div></div><div></div></div>'),$("#modal-machine input, #modal-machine select, #modal-machine textarea, #modal-machine .btn").prop("disabled",!0),$("#modal-machine .is-invalid").removeClass("is-invalid"),$.post("./machine.json",i+"&__CSRF_TOKEN__="+$('input[name="__CSRF_TOKEN__"]').val(),(function(e){if(Object.keys(e.errors).length>0)return $.each(e.errors,(function(t){$('#modal-machine [name="'+t+'"]').addClass("is-invalid"),$('#modal-machine [name="'+t+'"]').parent(".form-floating").addClass("is-invalid")})),void $("#modal-machine").scrollTop(0);$(".toast-container").empty();var a=$('<div id="toast" class="toast align-items-center text-bg-light border-0" role="alert" aria-live="assertive" aria-atomic="true">').html('<div class="d-flex"><div class="toast-body"><i class="bi bi-check-circle-fill text-success"></i> <strong>'+$('input[name="label"]').val()+'</strong> is created.</div><button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div>');$(".toast-container").append(a),a.toast("show"),$("#modal-machine").modal("hide"),$.get("./machine.json?action=city",(function(t){$('input[name="city"]').autoComplete({source:t}).refresh()}),"json"),t.draw()}),"json").fail((function(){alert("Connection lost, please try again.")})).always((function(t){a.prop("disabled",!1).html(a.data("html")),$("#modal-machine input, #modal-machine select, #modal-machine textarea, #modal-machine .btn").prop("disabled",!1),$('input[name="'+t.csrf.name+'"]').val(t.csrf.value)}))}))})),$("#modal-machine").on("hidden.bs.modal",(function(){$("#modal-machine .modal-title").html("New Machine"),$("#modal-machine form")[0].reset(),$('#modal-machine input[name="ip"]').val(""),$("#modal-machine select").trigger("change"),$("#btn-add-ip").closest("div").next(".overflow-y-scroll").empty(),$("#modal-machine .modal-footer .btn-primary").html("Add Machine"),$("#modal-machine .is-invalid").removeClass("is-invalid")})),$.each(variables.virtualizations,(function(t,e){$('select[name="virtualization"]').append('<option value="'+e+'">'+e+"</option>")})),$.each(variables.diskTypes,(function(t,e){$('select[name="disk-type"]').append('<option value="'+e+'">'+e+"</option>")})),$(".select-search").selectSearch(),$('input[name="ip-address"]').on("input",(function(){$(this).val($(this).val().trim()),$(this).toggleClass("is-invalid",!e.ip.isValid($(this).val())),$("#btn-add-ip").toggleClass("disabled",!e.ip.isValid($(this).val()))})).on("keypress",(function(t){13==t.which&&$("#btn-add-ip").trigger("click")})),$("#btn-add-ip").on("click",(function(t){t.preventDefault();var a=$('input[name="ip-address"]').val().trim();if(e.ip.isValid(a)){var i=$('input[name="ip"]').val().split(",");if(!i.includes(a)){i.push(a),$('input[name="ip"]').val(i.filter((t=>t)).join(","));var n=$('<div class="badge bg-secondary-subtle text-dark p-2 ps-3 py-3 d-flex w-100 mb-1">'),s=$('<i class="bi bi-x ms-auto pointer">').on("click",(function(t){t.preventDefault();var e=$('input[name="ip"]').val().split(","),i=e.indexOf(a);-1!==i&&(e.splice(i,1),$('input[name="ip"]').val(e.filter((t=>t)).join(","))),n.remove()}));$(this).closest("div").next(".overflow-y-scroll").prepend(n.append(a).append(s)),$(this).closest("div").next(".overflow-y-scroll").css({maxHeight:3*n.outerHeight()}),$('input[name="ip-address"]').val("")}}})),$(".float").on("input",(function(){$(this).val($(this).val().replace(/[^0-9.]/g,"")),$(this).val().indexOf(".")>-1&&$(this).val().match(/\./g).length>1&&$(this).val($(this).val().slice(0,-1))})).on("drop paste",(function(t){t.preventDefault()})),$(".number").on("input",(function(){$(this).val($(this).val().replace(/\D/g,"")),$(this).val($(this).val().replace(/^(0)[0-9]+/g,"$1"))})),$('input[name="price"]').currencyInput().on("input",(function(){"USD"==$('select[name="currency"]').val()?$(this).attr("data-usd-price",$(this).val()):$(this).attr("data-usd-price",$(this).val()/$('select[name="currency"] option:selected').attr("data-rate")*1e4)})),$('select[name="currency"]').on("change",(function(){$('input[name="price"]').val().length>0&&$('input[name="price"]').val(($('input[name="price"]').attr("data-usd-price")*$('select[name="currency"] option:selected').attr("data-rate")/1e4).toFixed(2))})),$('select[name="cycle"]').on("change",(function(){var t=new Date;switch(parseInt($(this).val())){case 2:var a=new Date(new Date(t.setMonth(t.getMonth()+3)).setDate(t.getDate()-1));break;case 3:a=new Date(new Date(t.setMonth(t.getMonth()+6)).setDate(t.getDate()-1));break;case 4:a=new Date(new Date(t.setFullYear(t.getFullYear()+1)).setDate(t.getDate()-1));break;case 5:a=new Date(new Date(t.setFullYear(t.getFullYear()+2)).setDate(t.getDate()-1));break;case 6:a=new Date(new Date(t.setFullYear(t.getFullYear()+3)).setDate(t.getDate()-1));break;default:a=new Date(new Date(t.setMonth(t.getMonth()+1)).setDate(t.getDate()-1))}$('input[name="due-date"]').datepicker("update",a.getFullYear()+"-"+e.zeroPad(a.getMonth()+1,2)+"-"+e.zeroPad(a.getDate(),2))})),$('input[name="due-date"]').datepicker({todayHighlight:!0,format:"yyyy-mm-dd",autoclose:!0}),$.get("./machine.json?action=city",(function(t){$('input[name="city"]').attr({autocomplete:"off",autocapitalize:"off"}).autoComplete({source:t})}),"json"),t=$("#table-machine").on("processing.dt",(function(){$("html, body").scrollTop(0)})).DataTable({autoWidth:!1,responsive:!0,processing:!0,serverSide:!0,pageLength:$.cookie("page-length")?$.cookie("page-length"):10,dom:'<"row"<"col-sm-12"tr>><"row"<"col-sm-12 col-md-5"i><"col-sm-12 col-md-7"p>>',ajax:"./machine.json",language:{lengthMenu:"Show _MENU_ records",zeroRecords:'<i class="bi bi-info-circle"></i> No data available.',paginate:{first:"First",last:"Last",next:'<i class="bi bi-chevron-right"></i>',previous:'<i class="bi bi-chevron-left"></i>'}},order:[1,"asc"],columnDefs:[{targets:0,className:"align-middle",orderable:!1,render:function(t,e){if("display"!=e)return t;var a=t.split(";");return'<div class="form-check"><input class="form-check-input" type="checkbox" name="machineId[]" value="'+a[0]+'" data-label="'+a[1]+'"></div>'}},{targets:1,render:function(t,e){if("display"!=e)return t;var a=t.split(";"),i="text-bg-primary";switch(a[1]){case"OpenVZ":i="text-bg-success";break;case"HyperV":i="text-bg-secondary";break;case"KVM":i="text-bg-info";break;case"LXD":i="text-bg-light";break;case"VMWare":i="text-bg-warning";break;case"XEN":i="text-bg-danger";break}return a[0]+'<p><span class="badge badge-sm '+i+'">'+a[1]+"</span>"+(1==a[2]?'<span class="badge badge-sm border border-1 border-warning text-warning ms-2">NAT</span>':"")+(1==a[3]?'<span class="badge text-primary" data-bs-toggle="tooltip" data-bs-title="Hidden"><i class="bi bi-eye-slash"></i></span>':"")+"</p>"}},{targets:2,render:function(t,e){if("display"!=e)return t;var a=t.split(";"),i="",n=a[3].split(",");return 1==n.length?i='<span class="text-muted" style="font-size: .75em">'+n[0]+' <a href="javascript:;" class="btn-copy" data-clipboard-text="'+n[0]+'"><i class="bi bi-copy"></i></a></span>':(i='<button class="btn border-0 p-0 dropdown-toggle" data-bs-toggle="dropdown" style="font-size: .75em">'+n[0]+'</button><ul class="dropdown-menu">',$.each(n,(function(t,e){i+='<li><a class="dropdown-item btn-copy" href="javascript:;" data-clipboard-text="'+e+'">'+e+"</a></li>"})),i+="</ul>"),'<div class="text-nowrap" data-bs-toggle="tooltip" data-bs-title="'+a[2]+'"><span class="fi fi-'+a[1].toLowerCase()+' me-2"></span>'+a[0]+"</div>"+(0==a[4]?'<i class="bi bi-exclamation text-danger" data-bs-toggle="tooltip" data-bs-title="Duplicated"></i>':"")+i}},{targets:3,render:function(t,a){return"display"!=a?t:e.formatBytes(1024*t*1024)}},{targets:4,render:function(t,a){if("display"!=a)return t;var i=t.split(";"),n="text-bg-primary";switch(i[1]){case"NVMe":n="text-bg-warning";break;case"SSD":n="text-bg-danger";break}return e.formatBytes(1024*i[0]*1024)+'<p><span class="badge badge-sm '+n+'">'+i[1]+"</span></p>"}},{targets:5,render:function(t,e){if("display"!=e)return t;var a=t.split(";");return'<button class="btn border-0 p-0 dropdown-toggle" data-bs-toggle="dropdown">'+a[0]+'</button><ul class="dropdown-menu">\t<li><a class="dropdown-item" href="'+a[1]+'" target="_blank"><i class="bi bi-globe-americas"></i> Website</a></li>\t<li><a class="dropdown-item" href="'+a[2]+'" target="_blank"><i class="bi bi-menu-button-wide"></i> Control Panel</a></li></ul>'}},{targets:6,className:"text-end",render:function(t,e){if("display"!=e)return t;var a=t.split(";"),i="",n="text-bg-primary";switch(parseInt(a[2])){case 1:i="Monthly",n="text-bg-warning";break;case 2:i="Quarterly",n="text-bg-info";break;case 3:i="Semi-Yearly",n="text-bg-dark";break;case 4:i="Yearly",n="text-bg-success";break;case 5:i="Bi-Yearly",n="text-bg-primary";break;case 6:i="Tri-Yearly",n="text-bg-danger";break}return'<span class="badge '+n+' d-md-none me-1">'+i.slice(0,1)+'</span><span class="badge text-bg-light">'+a[0]+"</span> "+(a[1]/100).toFixed(2)+'<p class="d-none d-md-block"><span class="badge '+n+'">'+i+"</span></p>"}},{target:7,render:function(t,a){if("display"!=a)return t;var i=t.split(";"),n=e.duration(i[1]),s="",l="tooltip-primary";return n.match(/ago/)?(s='<i class="bi bi-exclamation-circle-fill text-danger ms-2"></i>',l="tooltip-danger"):parseInt(n.replace(/\D/g,""))<7&&(s='<i class="bi bi-exclamation-triangle-fill text-warning ms-2"></i>',l="tooltip-warning"),'<button class="btn border-0 p-0 dropdown-toggle" data-bs-toggle="dropdown"><span data-bs-custom-class="'+l+'" data-bs-toggle="tooltip" data-bs-title="'+n+'">'+i[1]+s+'</span></button><ul class="dropdown-menu">\t<li><a class="dropdown-item renew" href="#" data-id="'+i[0]+'"><i class="bi bi-arrow-repeat"></i> Renew</a></li></ul>'}},{targets:8,className:"align-middle text-end",orderable:!1,render:function(t,e){if("display"!=e)return t;var a=t.split(";");return'<button type="button" class="btn btn-outline-dark btn-sm btn-edit mb-1 mb-md-0" data-id="'+a[0]+'"><i class="bi bi-pencil"></i></button><button type="button" class="btn btn-danger btn-sm btn-delete ms-1" data-id="'+a[0]+'" data-label="'+a[1]+'"><i class="bi bi-trash"></i></button>'}}],drawCallback:function(){var e=this.api();new ClipboardJS(".btn-copy").on("success",(function(t){$(t.trigger).parent().fadeOut(100).fadeIn(200)})),$("#btn-action").toggleClass("disabled",!0),$('#table-machine thead input[type="checkbox"]').prop("indeterminate",!1).prop("checked",!1).prop("disabled",!e.rows({page:"current"}).data().length).off("change").on("change",(function(){$('#table-machine tbody input[type="checkbox"]').prop("checked",$(this).is(":checked")).trigger("change")})),$('#table-machine tbody input[type="checkbox"]').off("change").on("change",(function(){var t=$('#table-machine tbody input[type="checkbox"]').length,e=$('#table-machine tbody input[type="checkbox"]:checked').length;$(this).is(":checked")?$(this).closest("tr").addClass("table-light"):$(this).closest("tr").removeClass("table-light"),$('#table-machine thead input[type="checkbox"]').prop("indeterminate",e>0&&e<t).prop("checked",e==t),$("#btn-action").toggleClass("disabled",0==e)})),$('[data-bs-toggle="tooltip"]').tooltip(),$(".dropdown-menu a.renew").on("click",(function(e){e.preventDefault();var a=$(this).data("id");$.post("./machine.json",{__CSRF_TOKEN__:$('input[name="__CSRF_TOKEN__"]').val(),action:"renew",id:a},(function(e){$(".toast-container").empty(),$.each(e.labels,(function(t,a){var i=$('<div id="toast" class="toast align-items-center text-bg-light border-0" role="alert" aria-live="assertive" aria-atomic="true">').html('<div class="d-flex"><div class="toast-body"><i class="bi bi-check-circle-fill text-success"></i> <strong>'+a+"</strong> is renewed to "+e.due_dates[t]+'.</div><button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div>');$(".toast-container").append(i),i.toast("show")})),t.draw(!1)})).fail("Connection lost, please try again.").always((function(t){$('input[name="'+t.csrf.name+'"]').val(t.csrf.value)}))})),$(".btn-edit").on("click",(function(e){e.preventDefault();var a=$(this).data("id"),i=$(this);i.data("html",i.html()).css({width:i.outerWidth(),height:i.outerHeight()}).prop("disabled",!0).html('<div class="loader-inner ball-beat"><div></div><div></div><div></div></div>'),$.get("./machine.json",{id:$(this).data("id"),action:"single"},(function(e){if(0!=e.length){$("#modal-machine .modal-title").html("Edit Machine"),$("#modal-machine .modal-footer .btn-primary").css({width:"auto"}).html("Save Changes"),$('input[name="is-hidden"]').prop("checked",1===e.is_hidden),$('input[name="label"]').val(e.label),$('select[name="provider"]').val(e.provider_id).trigger("change"),$('select[name="virtualization"]').val(e.virtualization).trigger("change"),$('input[name="ip"]').val(e.ip_address),$('input[name="is-nat"]').prop("checked",1===e.is_nat),$('input[name="bandwidth"]').val(e.bandwidth),$('select[name="bandwidth-unit"]').val(e.bandwidth_unit),$('select[name="country"]').val(e.country_code).trigger("change"),$('input[name="city"]').val(e.city_name),$('input[name="speed"]').val(e.cpu_speed),$('input[name="core"]').val(e.cpu_core),$('input[name="memory"]').val(e.memory),$('select[name="memory-unit"]').val(e.memory_unit),$('input[name="swap"]').val(e.swap),$('select[name="swap-unit"]').val(e.swap_unit),$('select[name="disk-type"]').val(e.disk_type),$('input[name="disk-space"]').val(e.disk_space),$('select[name="disk-space-unit"]').val(e.disk_space_unit),$('select[name="currency"]').val(e.currency_code),$('input[name="price"]').val(e.price).trigger("input"),$('select[name="cycle"]').val(e.payment_cycle_id),$('input[name="due-date"]').val(e.due_date),$('textarea[name="notes"]').val(e.notes);var i=e.ip_address.split(",");i.length>0&&$.each(i,(function(t,e){var a=$('<div class="badge bg-secondary-subtle text-dark p-2 ps-3 py-3 d-flex w-100 mb-1">'),i=$('<i class="bi bi-x ms-auto pointer">').on("click",(function(t){t.preventDefault();var i=$('input[name="ip"]').val().split(","),n=i.indexOf(e);-1!==n&&(i.splice(n,1),$('input[name="ip"]').val(i.filter((t=>t)).join(","))),a.remove()}));$("#btn-add-ip").closest("div").next(".overflow-y-scroll").prepend(a.append(e).append(i))})),$("#modal-machine").modal("show"),$("#btn-add-ip").closest("div").next(".overflow-y-scroll").css({maxHeight:3*$("#btn-add-ip").closest("div").next(".overflow-y-scroll").find(".border:first").outerHeight()}),$("#modal-machine .modal-footer .btn-primary").off("click").on("click",(function(e){e.preventDefault();var i=$(this),n=$("#modal-machine form").serialize();i.data("html",i.html()).css({width:i.outerWidth(),height:i.outerHeight()}).prop("disabled",!0).html('<div class="loader-inner ball-beat"><div></div><div></div><div></div></div>'),$("#modal-machine input, #modal-machine select, #modal-machine textarea, #modal-machine .btn").prop("disabled",!0),$("#modal-machine .is-invalid").removeClass("is-invalid"),$.post("./machine.json",n+"&id="+a+"&__CSRF_TOKEN__="+$('input[name="__CSRF_TOKEN__"]').val(),(function(e){if(Object.keys(e.errors).length>0)return $.each(e.errors,(function(t){$('#modal-machine [name="'+t+'"]').addClass("is-invalid"),$('#modal-machine [name="'+t+'"]').parent(".form-floating").addClass("is-invalid")})),void $("#modal-machine").scrollTop(0);$(".toast-container").empty();var a=$('<div id="toast" class="toast align-items-center text-bg-light border-0" role="alert" aria-live="assertive" aria-atomic="true">').html('<div class="d-flex"><div class="toast-body"><i class="bi bi-check-circle-fill text-success"></i> <strong>'+$('input[name="label"]').val()+'</strong> is modified.</div><button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div>');$(".toast-container").append(a),a.toast("show"),$("#modal-machine").modal("hide"),$.get("./machine.json?action=city",(function(t){$('input[name="city"]').autoComplete({source:t}).refresh()}),"json"),t.draw(!1)}),"json").fail((function(){alert("Connection lost, please try again.")})).always((function(t){i.prop("disabled",!1).html(i.data("html")),$("#modal-machine input, #modal-machine select, #modal-machine textarea, #modal-machine .btn").prop("disabled",!1),$('input[name="'+t.csrf.name+'"]').val(t.csrf.value)}))}))}})).fail((function(){alert("Connection lost, please try again.")})).always((function(){i.prop("disabled",!1).html(i.data("html"))}))})),$(".btn-delete").on("click",(function(e){e.preventDefault();var a=[$(this).data("id")],i=[$(this).data("label")];$("#modal-confirmation .modal-body").html('Are you sure you want to delete the following machine? <ul class="mt-3 ms-3"><li>'+i.join("</li><li>")+"</li></ul>"),$("#modal-confirmation .btn-danger").off("click").on("click",(function(e){e.preventDefault();var i=$(this);i.data("html",i.html()).css({width:i.outerWidth(),height:i.outerHeight()}).prop("disabled",!0).html('<div class="loader-inner ball-beat"><div></div><div></div><div></div></div>'),$.post("./machine.json",{__CSRF_TOKEN__:$('input[name="__CSRF_TOKEN__"]').val(),action:"delete",id:a},(function(e){$(".toast-container").empty(),$.each(e.labels,(function(t,e){var a=$('<div id="toast" class="toast align-items-center text-bg-light border-0" role="alert" aria-live="assertive" aria-atomic="true">').html('<div class="d-flex"><div class="toast-body"><i class="bi bi-check-circle-fill text-success"></i> <strong>'+e+'</strong> is deleted.</div><button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div>');$(".toast-container").append(a),a.toast("show")})),$("#modal-confirmation").modal("hide"),t.draw(!1)}),"json").fail((function(){alert("Connection lost, please try again.")})).always((function(t){i.prop("disabled",!1).html(i.data("html")),$('input[name="'+t.csrf.name+'"]').val(t.csrf.value)}))})),$("#modal-confirmation").modal("show")}))}}),$("#action-hide").on("click",(function(e){e.preventDefault();var a=[];$('#table-machine tbody input[type="checkbox"]:checked').each((function(t,e){a.push($(e).val())})),$.post("./machine.json",{__CSRF_TOKEN__:$('input[name="__CSRF_TOKEN__"]').val(),action:"hide",id:a},(function(e){$(".toast-container").empty(),$.each(e.labels,(function(t,e){var a=$('<div id="toast" class="toast align-items-center text-bg-light border-0" role="alert" aria-live="assertive" aria-atomic="true">').html('<div class="d-flex"><div class="toast-body"><i class="bi bi-check-circle-fill text-success"></i> <strong>'+e+'</strong> is set to hidden.</div><button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div>');$(".toast-container").append(a),a.toast("show")})),t.draw(!1)})).fail("Connection lost, please try again.").always((function(t){$('input[name="'+t.csrf.name+'"]').val(t.csrf.value)}))})),$("#action-unhide").on("click",(function(e){e.preventDefault();var a=[];$('#table-machine tbody input[type="checkbox"]:checked').each((function(t,e){a.push($(e).val())})),$.post("./machine.json",{__CSRF_TOKEN__:$('input[name="__CSRF_TOKEN__"]').val(),action:"unhide",id:a},(function(e){$(".toast-container").empty(),$.each(e.labels,(function(t,e){var a=$('<div id="toast" class="toast align-items-center text-bg-light border-0" role="alert" aria-live="assertive" aria-atomic="true">').html('<div class="d-flex"><div class="toast-body"><i class="bi bi-check-circle-fill text-success"></i> <strong>'+e+'</strong> is set to unhide.</div><button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div>');$(".toast-container").append(a),a.toast("show")})),t.draw(!1)})).fail("Connection lost, please try again.").always((function(t){$('input[name="'+t.csrf.name+'"]').val(t.csrf.value)}))})),$("#action-delete").on("click",(function(e){e.preventDefault();var a=[],i=[];$('#table-machine tbody input[type="checkbox"]:checked').each((function(t,e){a.push($(e).val()),i.push($(e).data("label"))})),$("#modal-confirmation .modal-body").html("Are you sure you want to delete the following machine"+(a.length>1?"s":"")+'? <ul class="mt-3 ms-3"><li>'+i.join("</li><li>")+"</li></ul>"),$("#modal-confirmation .btn-danger").off("click").on("click",(function(e){e.preventDefault();var i=$(this);i.data("html",i.html()).css({width:i.outerWidth(),height:i.outerHeight()}).prop("disabled",!0).html('<div class="loader-inner ball-beat"><div></div><div></div><div></div></div>'),$.post("./machine.json",{__CSRF_TOKEN__:$('input[name="__CSRF_TOKEN__"]').val(),action:"delete",id:a},(function(e){$(".toast-container").empty(),$.each(e.labels,(function(t,e){var a=$('<div id="toast" class="toast align-items-center text-bg-light border-0" role="alert" aria-live="assertive" aria-atomic="true">').html('<div class="d-flex"><div class="toast-body"><i class="bi bi-check-circle-fill text-success"></i> <strong>'+e+'</strong> is deleted.</div><button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div>');$(".toast-container").append(a),a.toast("show")})),$("#modal-confirmation").modal("hide"),t.draw(!1)}),"json").fail((function(){alert("Connection lost, please try again.")})).always((function(t){i.prop("disabled",!1).html(i.data("html")),$('input[name="'+t.csrf.name+'"]').val(t.csrf.value)}))})),$("#modal-confirmation").modal("show")})),$("#action-renew").on("click",(function(e){e.preventDefault();var a=[];$('#table-machine tbody input[type="checkbox"]:checked').each((function(t,e){a.push($(e).val())})),$.post("./machine.json",{__CSRF_TOKEN__:$('input[name="__CSRF_TOKEN__"]').val(),action:"renew",id:a},(function(e){$(".toast-container").empty(),$.each(e.labels,(function(t,a){var i=$('<div id="toast" class="toast align-items-center text-bg-light border-0" role="alert" aria-live="assertive" aria-atomic="true">').html('<div class="d-flex"><div class="toast-body"><i class="bi bi-check-circle-fill text-success"></i> <strong>'+a+"</strong> is renewed to "+e.due_dates[t]+'.</div><button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div>');$(".toast-container").append(i),i.toast("show")})),t.draw(!1)})).fail("Connection lost, please try again.").always((function(t){$('input[name="'+t.csrf.name+'"]').val(t.csrf.value)}))}))}zeroPad(t,e){return t.toString().padStart(e,"0")}formatBytes(t){var e=0===t?0:Math.floor(Math.log(t)/Math.log(1024));return 1*(t/Math.pow(1024,e)).toFixed(2)+" "+["B","kB","MB","GB","TB"][e]}formatNumber(t){return t.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")}duration(t){var e=t.split("-"),a=Math.floor((new Date-new Date(e[0],e[1]-1,e[2]))/864e5);return 0===a?"Now":a>0?a+" day"+(a>1?"s":"")+" ago":-1*a+" day"+(a<-1?"s":"")+" later"}}